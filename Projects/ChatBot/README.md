## üïâÔ∏è Devi : Sri Lalithambigai Temple AI Assistant

This project implements **Devi**, a sophisticated, fact-checked chatbot for the **Sri Lalithambigai Temple (UK)**. Built with the **Gemini API** and leveraging **Google Search Grounding**, Devi provides real-time, accurate information exclusively sourced from the temple's official website (`srilalithambigaitemple.co.uk`).

It incorporates robust engineering practices, including a system persona instruction and an exponential backoff mechanism for reliable API calls.

### ‚ú® Key Features

  * **Google Search Grounding:** Answers are generated by augmenting the user's query with a `site:srilalithambigaitemple.co.uk` operator. This ensures the model's search is strictly constrained to the official temple domain for high factual accuracy.
  * **System Persona (`systemInstruction`):** A clear instruction set defines the bot's role as "Devi," a knowledgeable, friendly, and factual assistant, strictly bound to the search results.
  * **Source Citations:** The chatbot extracts and displays the **specific source URIs and titles** used by the Gemini model to ground its response, allowing users to verify the information.
  * **Exponential Backoff:** The `generateContentWithRetry` function uses an exponential backoff algorithm to automatically retry failed API calls (e.g., due to rate limits or transient network errors), significantly increasing the application's resilience and reliability.

### üõ†Ô∏è Setup and Installation

#### 1\. Obtain Your Gemini API Key

1.  Visit [Google AI Studio] and generate your API Key.
2.  Set the API key as an environment variable named `GOOGLE_API_KEY`.

**In a Colab Environment:**
You must secure your key using the **Colab Secrets** feature (key name: `GOOGLE_API_KEY`). The provided script will handle loading the key from `userdata.get()`.

**In a Local Environment:**
Set the environment variable via your terminal:

```bash
export GOOGLE_API_KEY='YOUR_ACTUAL_API_KEY_HERE'
```

#### 2\. Install Dependencies

The project requires the `requests`, `textwrap`, and `BeautifulSoup` libraries.

```bash
pip install requests beautifulsoup4
```

#### 3\. Run the Chatbot

Execute the Python script to start the conversation loop:

```bash
python ITTH_Temple_Chatbot.py
```

### üíª Usage

Once executed, the chatbot will greet you and prompt for input:

```
=== üïâÔ∏è Devi: Sri Lalithambigai Temple AI Assistant ===

Context: Answers are grounded to: srilalithambigaitemple.co.uk
Ask me anything about the temple (e.g., 'What are the opening times?' or 'How do I donate?').
Type 'exit' or 'quit' or 'terminate' or 'bye' to end the session.

You : What are the opening hours?

Assistant (Devi) : Searching and generating response...

üïâÔ∏è Assistant (Devi)
====================================================================================================
The Sri Lalithambigai Temple in Birmingham, UK, is open for Darshan during the following times:
Monday to Friday: 9:00 AM ‚Äì 1:00 PM and 5:00 PM ‚Äì 8:00 PM. Weekends and Bank Holidays: 9:00 AM ‚Äì
8:00 PM. Please note that the temple may have adjusted hours for specific events or Poojas, so it's
always best to check the official schedule on the website for the day you plan to visit.
====================================================================================================


--- Knowledge Sources (Grounding) ---
1. Opening Times
   URI: https://srilalithambigaitemple.co.uk/opening-times/
----------------------------------------------------------------------------------------------------

====================================================================================================

You : How can I make a donation?

Assistant (Devi) : Searching and generating response...

üïâÔ∏è Assistant (Devi)
====================================================================================================
Donations and sponsorships for the Sri Lalithambigai Temple can be made by downloading the dedicated
form available on the official website. You can find this form at the verified link:
srilalithambigaitemple.co.uk/sponsorship/
====================================================================================================


--- Knowledge Sources (Grounding) ---
1. Sponsorship
   URI: https://srilalithambigaitemple.co.uk/sponsorship/
----------------------------------------------------------------------------------------------------

====================================================================================================

You : quit
Thank you for using the Devi Assistant. Goodbye!
```

### üß† Understanding Exponential Backoff

The `generateContentWithRetry` function employs **Exponential Backoff** to manage API failures gracefully.

This mechanism ensures that if an API call fails (e.g., a **429 Rate Limit** error), the application waits for a geometrically increasing amount of time before retrying.

| Attempt (n) | Delay Formula | Wait Time |
| :---------: | :-----------: | :-------: |
| 1           | $2^{1-1} = 1$ | 1 sec     |
| 2           | $2^{2-1} = 2$ | 2 sec     |
| 3           | $2^{3-1} = 4$ | 4 sec     |
| 4           | $2^{4-1} = 8$ | 8 sec     |
| 5           | $2^{5-1} = 16$| 16 sec    |

This prevents a client from overwhelming a temporarily busy server with immediate, repeated requests, making the application much more stable and production-ready.
